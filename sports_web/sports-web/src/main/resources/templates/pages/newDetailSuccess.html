<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>订单信息</title>
    <link rel="stylesheet" href="${staticPath}/css/layout.css?v=${cssV}" />
    <link rel="stylesheet" href="${staticPath}/css/mescroll.min.css">
    <style>
        #mescroll{
            position: absolute;
            top: 1.28rem;
            bottom: 0.88rem;
            overflow-y: scroll;
            height:auto;
        }
        .realname{
            max-width: 75%;
            padding: 0.1rem 0;
            overflow: hidden;
            display: -webkit-box;
            text-overflow: ellipsis;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            height: 0.7rem;
            line-height: 0.4rem;
        }
        .backgroundDetail{
            height:2.1rem;
        }
        .backgroundDetail img{
            height:2.1rem;
        }
        .order_tips{
            background: white;
            font-size: 0.26rem;
            color: #4b4b4b;
            height:3.35rem;
        }
        .medal_tips{
            position:absolute;
            left: 0;
            right: 0;
        }
        .goodsPic{
            width: 1.5rem;
            height: 1.5rem;
            margin-left: 0.3rem;
            margin-top: 1.45rem;
        }
        .medalTotalk{
            display: inline-block;
            margin-left: 0.2rem;
            height: 1.5rem;
            position: absolute;
            top: 1.55rem;
        }
        .medalTotalk .medal_tips_name{
            font-family: PingFangSC-Medium;
            font-size: 0.26rem;
            color: #333333;
            font-weight:  bold;
        }
        .medalTotalk .medal_tips_price{
            margin-top: 0.29rem;
            font-family: PingFangSC-Semibold;
            font-size: 0.28rem;
            color: #FF8F00;
            line-height: 0.36rem;
            width: 5.2rem;
            display: flex;
            justify-content: space-between;
        }
        .medal_tipsUl{
            width: 6.9rem;
            height: 0.92rem;
            font-size: 0.28rem;
            color: #666666;
            margin: 0.2rem auto;
        }
        .medal_tipsUl li{
            line-height: 0.46rem;
            display: flex;
            justify-content: space-between;
        }
        .medal_tipsUl li:last-child{
            padding-bottom: 0.2rem;
            border-bottom: 1px #ccc solid;
        }
        .medal_tipsDiv{
            width: 6.9rem;
            position: absolute;
            top: 1.52rem;
            left: 0.3rem;
            display: flex;
            justify-content: space-between;
            font-size:0.28rem;
        }
        .commTwo{
            height: 2.29rem;
            position: absolute;
        }
        .commThree{
            height: 2.74rem;
            position: absolute;
            top: 7.94rem;
        }
        .boldFont{
            font-weight: bold;
        }
        .yellowFont{
            color:#FF8F00;
        }
        .pay_lie li span:first-child{
            color:#333;
        }
        .pay_lie li span:last-child{
            color:#2A2A2A;
        }
        .middleDivSK{
            background: #FFFFFF;
            box-shadow: 0 0 0.06rem 0 rgba(0,0,0,0.20);
            border-radius: 0.2rem;
            width: 6.9rem;
            height: 1.87rem;
            position: absolute;
            top: 1.28rem;
            left: 0.3rem;
        }
        .middleDivSK img{
            width:0.3rem;
            height:0.26rem;
            margin-left: 0.2rem;
            margin-top: 0.36rem;
        }
        .middleSDK_div{
            display: inline-block;
            width: 6.3rem;
            position: absolute;
            margin-left: 0.1rem;
            top: 0.3rem;
        }
        .middleSDK_div p:first-child{
            font-family: PingFangSC-Medium;
            font-size: 0.26rem;
            color: #333333;
            font-weight: bold;
        }
        .middleSDK_div p:last-child{
            margin-top: 0.18rem;
            margin-right: 0.3rem;
            font-family: PingFangSC-Regular;
            font-size: 0.24rem;
            color: #333333;
            line-height: 0.36rem;
            display:-webkit-box;
            -webkit-line-clamp:2;
            -webkit-box-orient:vertical;
            overflow:hidden;
        }
        .finalls{
            margin-left: 0.3rem;
            margin-top: 0.4rem;
        }
        .finalls span:first-child{
            font-family: PingFangSC-Medium;
            font-size: 0.34rem;
            color: #FFFFFF;
            text-align: center;
        }
        .finalls span:last-child{
            font-family: PingFangSC-Regular;
            font-size: 0.24rem;
            color: #FFFFFF;
            margin-left: 0.3rem;
        }
        /*.flagHH{
            display:none;
        }
        .flagHHBlock{
            display: inline-block;
        }*/
    </style>
</head>
<body>
<div id="box_content" style="height: 100%;overflow-y: scroll;">
    <div class="h5_header" style="position:absolute">
        <img src="${staticPath}/img/icon_back.png"/>
        <div class="back" onclick="back()">返回</div>
        <div class="title">订单信息</div>
    </div>
    <div class="service_content mescroll" id="mescroll">
        <div id="wrapper">
            <div class="pay_entyr common_layout custom_title" style="margin: 0;">
                <div class="finalls" style="
                    position: absolute;
                "><span class="statusMoney">已付款</span><span class="flagHH">预计72小时内发货</span></div>
                <div class="middleDivSK">
                    <img class="middleDivSK_img" src="${staticPath}/img/icon_add@2x.png">
                    <div class="middleSDK_div">
                        <p>
                            <span class="personNames" style="margin-right:0.3rem">李智能</span>
                            <span class="personPhotos">13219755555</span>
                        </p>
                        <p class="statusAdress" style="margin-top:0.18rem;margin-right: 0.3rem;">地址：四川省成都市高新区盛华南路天府软件园天府软件园天府软件园</p>
                    </div>
                </div>
                <div class="backgroundDetail">
                    <img src="${staticPath}/img/img_bg_dd@2x.png" />
                </div>
                <div class="order_tips">
                    <div class="medal_tips">
                        <img class="goodsPic" src="${staticPath}/img/award_3.jpg">
                        <div class="medalTotalk">
                            <p class="medal_tips_name">--</p>
                            <p class="medal_tips_price">
                                <span class="medal_tips_price_f">￥--.--</span>
                                <span>x<span class="medal_tips_price_l"></span></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pay_entyr common_layout custom_title commTwo">
                <ul class="medal_tipsUl">
                    <li>
                        <span class="boldFont">商品金额</span>
                        <span class="boldFont moneyPh">￥--.--</span>
                    </li>
                    <li>
                        <span class="boldFont">运费</span>
                        <span class="boldFont moneyYf">￥--.--</span>
                    </li>
                </ul>
                <div class="medal_tipsDiv">
                    <span class="boldFont">总计：</span>
                    <span class="yellowFont boldFont moneyTotal">￥--.--</span>
                </div>
            </div>

            <div class="pay_entyr common_layout custom_title commThree">
                <ul class="pay_lie">
                    <li class="flex flex-align-center">
                        <span>订单编号：</span>
                        <span class="orderCode"></span>
                    </li>
                    <li class="flex flex-align-center">
                        <span>下单时间：</span>
                        <span class="orderTime"></span>
                    </li>
                    <li class="flex flex-align-center">
                        <span>支付方式：</span>
                        <span class="orderPrice"></span>
                    </li>
                    <!--<li class="flex flex-align-center">-->
                    <!--<span>备注信息：</span>-->
                    <!--<span class="orderRemake"></span>-->
                    <!--</li>-->
                </ul>
            </div>
            <div class="kong_margin" style="height: 3rem;"></div>

        </div>


    </div>
</div>
</body>
<script type="text/javascript" src="${staticPath}/js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="${staticPath}/js/config.js?v=${cssV}"></script>
<script type="text/javascript" src="${staticPath}/js/mescroll.min.js"></script>
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script>
    var path = '${ctx}';
    var orderStatusIf = ''; //判断是否是完成
    var addressToP = ''; // 用户的地址
    // var loadingBox = new loadingBox();
    // loadingBox.creat();
    var jumpOrderCenterIf = getThePrameValue('waitPayCode')
    if(jumpOrderCenterIf==''||jumpOrderCenterIf==null||jumpOrderCenterIf==undefined){
        jumpOrderCenterIf = ''
    }
    var orderCodeTest = getThePrameValue('orderCodeTest');
    var agent = navigator.userAgent.toLowerCase();

    if(!getThePrameValue('platform')){
        $('#mescroll').css(
            'top',0.88+'rem'
        );
    }else if(getThePrameValue('platform') == 'iOS'){
        if (clientType('iphoneX')) {
            //是iphoneX
            $('#mescroll').css(
                'top',1.76+'rem'
            );
        }
    }

    //获取订单详情数据
    getDetailData()

    //获取
    function getDetailData(){
        getResultMethods(path + '/shop/user/order/'+orderCodeTest, { }, function(data) {
            if(data.resultCode == 200){
                var datas = data.result.order;
                if(datas){
                    switch(datas.orderStatus){
                        case 'success':
                            orderStatusIf = '已付款';
                            $('.flagHH').html('预计72小时内发货')
                            break;
                        case 'shipped':
                            orderStatusIf = '已发货';
                            $('.flagHH').html('快递小哥努力给你送货中')
                            break;
                        case 'wait_pay':
                            orderStatusIf = '待支付';
                            $('.flagHH').html('')
                            break;
                        case 'completed':
                            orderStatusIf = '已完成';
                            $('.flagHH').html('')
                            break;
                        default:
                            break;
                    }
                    $('.statusMoney').html(orderStatusIf);
                    var realNameChange = datas.realname;
                    if(realNameChange.length>6){
                        realNameChange = realNameChange.substring(0,6) + '...';
                    }
                    $('.personNames').html(realNameChange);
                    $('.personPhotos').html(datas.mobile);
                    addressToP = datas.province + datas.city + datas.area + datas.address;
                    $('.statusAdress').html(addressToP);
                    $('.medal_tips_name').html(datas.goodsTitle);
                    $('.medal_tips_price_f').html(Number(datas.goodsPrice)/100);
                    $('.medal_tips_price_l').html(datas.goodsNum);
                    $('.moneyPh').html(Number(datas.goodsPrice) * Number(datas.goodsNum)/100);
                    $('.moneyYf').html(Number(datas.extraMoney)/100);
                    $('.moneyTotal').html(Number(datas.orderPrice)/100);
                    $('.orderCode').html(datas.payOrderCode)
                    $('.orderTime').html(datas.orderTime)
                    $('.orderPrice').html(datas.payType)
                    if(datas.goodsPic){
                        $('.goodsPic').attr('src',datas.goodsPic);
                    }
                }
                // $('.goodsCode').html(datas.goodsCode)
                // $('.goodsTitle').html(datas.goodsTitle)
                // $('.realname').html(datas.realname)
                // $('.mobile').html(datas.mobile)
                // $('.address').html(datas.province+datas.city+datas.area+datas.address)
                // $('.orderCode').html(datas.orderCode)
                // $('.orderTime').html(datas.orderTime)
                // $('.orderPrice').html('￥'+Number(datas.orderPrice)/100)
                // payordercodes=datas.payOrderCode;
                // $('.orderRemake').html(datas.orderRemake)

            }
        })

    }

    function back() {
        window.location.href = path +'/orderCenter';
    }


    // //初始化下拉加载组件
    // var mescroll = new MeScroll("mescroll", {
    //     up: {
    //         auto: true, //是否在初始化时以上拉加载的方式自动加载第一页数据; 默认false
    //         isBounce: false, //此处禁止ios回弹,解析(务必认真阅读,特别是最后一点): http://www.mescroll.com/qa.html#q10
    //         htmlNodata: '<p class="upwarp-nodata">-- 无更多数据 --</p>',
    //         callback: endLoad //上拉回调,此处可简写; 相当于 callback: function (page) { upCallback(page); }
    //         // toTop:{ //配置回到顶部按钮
    //         //     src : "../res/img/mescroll-totop.png", //默认滚动到1000px显示,可配置offset修改
    //         //     //offset : 1000
    //         // }
    //     }
    // });


    function endLoad(page) {
        console.log('加载')
        if(page.num == 1){
            setTimeout(function () {
                getMYGradeList(page.num)

            },1500)
        }else{
            getMYGradeList(page.num)
        }
    }
</script>
<style>

</style>
</html>